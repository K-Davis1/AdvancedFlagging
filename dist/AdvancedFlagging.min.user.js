// ==UserScript==
// @name         Advanced Flagging
// @namespace    https://github.com/SOBotics
// @version      0.1
// @author       Robert Rudman
// @match        *://*.stackexchange.com/*
// @match        *://*.stackoverflow.com/*
// @match        *://*.superuser.com/*
// @match        *://*.serverfault.com/*
// @match        *://*.askubuntu.com/*
// @match        *://*.stackapps.com/*
// @match        *://*.mathoverflow.net/*
// @exclude      *://chat.stackexchange.com/*
// @exclude      *://chat.meta.stackexchange.com/*
// @exclude      *://chat.stackoverflow.com/*
// @exclude      *://blog.stackoverflow.com/*
// @exclude      *://*.area51.stackexchange.com/*
// @require      https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js
// @require      https://cdn.rawgit.com/ofirdagan/cross-domain-local-storage/d779a81a6383475a1bf88595a98b10a8bd5bb4ae/dist/scripts/xdLocalStorage.min.js
// @grant        GM_xmlhttpRequest
// ==/UserScript==
!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=27)}([function(t,e,n){var r,o,i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r["throw"](t))}catch(e){i(e)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(r){n=[6,r],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};r=[n,e],o=function(t,e){"use strict";function n(t){xdLocalStorage.init({iframeUrl:t,initCallback:function(){u()}})}function r(t,e,n){return i(this,void 0,void 0,function(){var r,o;return s(this,function(i){switch(i.label){case 0:return[4,a(t)];case 1:return r=i.sent(),void 0!==r?[2,r]:[4,e()];case 2:return o=i.sent(),c(t,o,n),[2,o]}})})}function o(){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,p];case 1:return t.sent(),xdLocalStorage.clear(),[2]}})})}function a(t){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,p];case 1:return e.sent(),[2,new Promise(function(e,n){p.then(function(){xdLocalStorage.getItem(t,function(t){var n=JSON.parse(t.value);return!n||n.Expires&&n.Expires<new Date?void e():e(n.Data)})})})]}})})}function c(t,e,n){return i(this,void 0,void 0,function(){var r;return s(this,function(o){switch(o.label){case 0:return[4,p];case 1:return o.sent(),r=JSON.stringify({Expires:n,Data:e}),xdLocalStorage.setItem(t,r),[2]}})})}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){},p=new Promise(function(t,e){return u=t});e.InitializeCache=n,e.GetAndCache=r,e.ClearCache=o,e.GetFromCache=a,e.StoreInCache=c}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function r(t){return t.reduce(function(t,e){return t.concat(e instanceof u.UnsubscriptionError?e.errors:e)},[])}var o=n(19),i=n(20),s=n(8),a=n(24),c=n(7),u=n(18),p=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this,p=n._parent,l=n._parents,h=n._unsubscribe,f=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,b=l?l.length:0;p;)p.remove(this),p=++d<b&&l[d]||null;if(s.isFunction(h)){var m=a.tryCatch(h).call(this);m===c.errorObject&&(e=!0,t=t||(c.errorObject.e instanceof u.UnsubscriptionError?r(c.errorObject.e.errors):[c.errorObject.e]))}if(o.isArray(f))for(d=-1,b=f.length;++d<b;){var y=f[d];if(i.isObject(y)){var m=a.tryCatch(y.unsubscribe).call(y);if(m===c.errorObject){e=!0,t=t||[];var v=c.errorObject.e;v instanceof u.UnsubscriptionError?t=t.concat(r(v.errors)):t.push(v)}}}if(e)throw new u.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new t,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=this._subscriptions||(this._subscriptions=[]);return o.push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this,n=e._parent,r=e._parents;n&&n!==t?r?r.indexOf(t)===-1&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();e.Subscription=p},function(t,e,n){"use strict";var r=n(3),o=r.root.Symbol;e.rxSubscriber="function"==typeof o&&"function"==typeof o["for"]?o["for"]("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,n){"use strict";(function(t){var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o="undefined"!=typeof t&&t,i=n||o||r;e.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(e,n(26))},function(t,e,n){var r,o;r=[n,e],o=function(t,e){"use strict";function n(t){return new Promise(function(e){setTimeout(function(){e()},t)})}function r(t,e){return t.reduce(function(t,n){return(t[e(n)]=t[e(n)]||[]).push(n),t},{})}function o(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.Delay=n,e.GroupBy=r,e.GetMembers=o}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t,e){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(8),i=n(1),s=n(5),a=n(2),c=function(t){function e(n,r,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!n){this.destination=s.empty;break}if("object"==typeof n){n instanceof e?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new u(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new u(this,n,r,o)}}return r(e,t),e.prototype[a.rxSubscriber]=function(){return this},e.create=function(t,n,r){var o=new e(t,n,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,n=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=n,this},e}(i.Subscription);e.Subscriber=c;var u=function(t){function e(e,n,r,i){t.call(this),this._parentSubscriber=e;var a,c=this;o.isFunction(n)?a=n:n&&(a=n.next,r=n.error,i=n.complete,n!==s.empty&&(c=Object.create(n),o.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=a,this._error=r,this._complete=i}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){throw this.unsubscribe(),n}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(r){return t.syncErrorValue=r,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c)},function(t,e){"use strict";e.errorObject={e:{}}},function(t,e){"use strict";function n(t){return"function"==typeof t}e.isFunction=n},function(t,e,n){var r,o;r=[n,e],o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flagCategories=[{BoxStyle:{"padding-left":"5px","padding-right":"5px","background-color":"rgba(241, 148, 148, 0.6)"},AppliesTo:["Answer","Question"],FlagTypes:[{DisplayName:"Spam",ReportType:"PostSpam"},{DisplayName:"Rude or Abusive",ReportType:"PostOffensive"}]},{BoxStyle:{"padding-left":"5px","padding-right":"5px"},AppliesTo:["Answer"],FlagTypes:[{DisplayName:"Link Only",ReportType:"AnswerNotAnAnswer",Comment:"A link to a solution is welcome, but please ensure your answer is useful without it: [add context around the link](//meta.stackexchange.com/a/8259) so your fellow users will have some idea what it is and why it’s there, then quote the most relevant part of the page you're linking to in case the target page is unavailable. [Answers that are little more than a link may be deleted.](//stackoverflow.com/help/deleted-answers)"},{DisplayName:"Not an answer",ReportType:"AnswerNotAnAnswer",Comments:[{ReputationLimit:0,Comment:"This does not provide an answer to the question. You can [search for similar questions](//stackoverflow.com/search), or refer to the related and linked questions on the right-hand side of the page to find an answer. If you have a related but different question, [ask a new question](//stackoverflow.com/questions/ask), and include a link to this one to help provide context. See: [Ask questions, get answers, no distractions](//stackoverflow.com/tour)"},{ReputationLimit:50,Comment:"This post doesn't look like an attempt to answer this question. Every post here is expected to be an explicit attempt to *answer* this question; if you have a critique or need a clarification of the question or another answer, you can [post a comment](//stackoverflow.com/help/privileges/comment) (like this one) directly below it. Please remove this answer and create either a comment or a new question. See: [Ask questions, get answers, no distractions](//stackoverflow.com/tour)"}]},{DisplayName:"Thanks",ReportType:"AnswerNotAnAnswer",Comment:"Please don't add _\"thanks\"_ as answers. They don't actually provide an answer to the question, and can be perceived as noise by its future visitors. Once you [earn](http://meta.stackoverflow.com/q/146472) enough [reputation](http://stackoverflow.com/help/whats-reputation), you will gain privileges to [upvote answers](http://stackoverflow.com/help/privileges/vote-up) you like. This way future visitors of the question will see a higher vote count on that answer, and the answerer will also be rewarded with reputation points. See [Why is voting important](http://stackoverflow.com/help/why-vote)."},{DisplayName:"Me too",ReportType:"AnswerNotAnAnswer",Comment:"Please don't add *\"Me too\"* as answers. It doesn't actually provide an answer to the question. If you have a different but related question, then [ask](//$SITEURL$/questions/ask) it (reference this one if it will help provide context). If you're interested in this specific question, you can [upvote](//stackoverflow.com/help/privileges/vote-up) it, leave a [comment](//stackoverflow.com/help/privileges/comment), or start a [bounty](//stackoverflow.com/help/privileges/set-bounties) once you have enough [reputation](//stackoverflow.com/help/whats-reputation)."},{DisplayName:"Library",ReportType:"AnswerNotAnAnswer",Comment:"Please don't just post some tool or library as an answer. At least demonstrate [how it solves the problem](http://meta.stackoverflow.com/a/251605) in the answer itself."},{DisplayName:"Comment",ReportType:"AnswerNotAnAnswer",Comment:"This does not provide an answer to the question. Once you have sufficient [reputation](https://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](https://stackoverflow.com/help/privileges/comment); instead, [provide answers that don't require clarification from the asker](https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead)."}]},{BoxStyle:{"padding-left":"5px","padding-right":"5px"},AppliesTo:["Answer","Question"],FlagTypes:[{DisplayName:"Looks Fine",ReportType:"NoFlag"},{DisplayName:"Needs Editing",ReportType:"NoFlag"}]}]}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t,e,n){var r,o,i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r["throw"](t))}catch(e){i(e)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(r){n=[6,r],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};r=[n,e,n(0),n(4)],o=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="MetaSmoke.Disabled",a="MetaSmoke.UserKey",c="MetaSmoke.WasReported",u=function(){function t(t,e){var c=this;e||(e=function(t){return i(c,void 0,void 0,function(){var e,i,c;return s(this,function(s){switch(s.label){case 0:return[4,this.IsDisabled()];case 1:return e=s.sent(),e?[2]:[4,n.GetFromCache(a)];case 2:return(i=s.sent())?[2,i]:confirm("Setting up MetaSmoke... If you do not wish to connect, press cancel. This will not show again if you press cancel. To reset configuration, see footer of Stack Overflow.")?(window.open(t,"_blank"),[4,r.Delay(100)]):(n.StoreInCache(o,!0),[2]);case 3:return s.sent(),[4,new Promise(function(t){var e=function(){$(window).off("focus",e);var n=window.prompt("Once you've authenticated FDSC with metasmoke, you'll be given a code; enter it here.");return n?t(n):void t()};$(window).focus(e)})];case 4:return c=s.sent(),[2,c]}})})}),this.codeGetter=e,this.appKey=t,this.getUserKey()}return t.prototype.getUserKey=function(){var t=this;return n.GetAndCache(a,function(){return new Promise(function(e,n){return i(t,void 0,void 0,function(){var t,r;return s(this,function(o){switch(o.label){case 0:return t=this.actualPromise,void 0===t&&(t=this.codeGetter("https://metasmoke.erwaysoftware.com/oauth/request?key="+this.appKey),this.actualPromise=t),[4,t];case 1:return r=o.sent(),$.ajax({url:"https://metasmoke.erwaysoftware.com/oauth/token?key="+this.appKey+"&code="+r,method:"GET"}).done(function(t){return e(t.token)}).fail(function(t){return n(t)}),[2]}})})})})},t.prototype.Reset=function(){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,n.StoreInCache(o,void 0)];case 1:return t.sent(),[4,n.StoreInCache(a,void 0)];case 2:return t.sent(),[2]}})})},t.prototype.IsDisabled=function(){return i(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,n.GetFromCache(o)];case 1:return t=e.sent(),void 0===t?[2,!1]:[2,t]}})})},t.prototype.GetFeedback=function(t,e){return i(this,void 0,void 0,function(){var r,o,i,a=this;return s(this,function(s){switch(s.label){case 0:return r="Answer"===e?"//"+window.location.hostname+"/a/"+t:"//"+window.location.hostname+"/questions/"+t,[4,this.IsDisabled()];case 1:return o=s.sent(),o?[2,[]]:[4,n.GetAndCache(c+"."+r,function(){return new Promise(function(t,e){$.ajax({type:"GET",url:"https://metasmoke.erwaysoftware.com/api/posts/urls",data:{urls:r,key:""+a.appKey}}).done(function(e){t(e.items)}).fail(function(t){e(t)})})})];case 2:return i=s.sent(),[2,i]}})})},t.prototype.Report=function(t,e){var r=this,o="Answer"===e?"//"+window.location.hostname+"/a/"+t:"//"+window.location.hostname+"/q/"+t,i=new Promise(function(t,e){r.getUserKey().then(function(n){$.ajax({type:"POST",url:"https://metasmoke.erwaysoftware.com/api/w/post/report",data:{post_link:o,key:r.appKey,token:n}}).done(function(){return t()}).fail(function(){return e()})})});return i.then(function(){n.StoreInCache(c+"."+o,void 0)}),i},t.prototype.ReportTruePositive=function(t){return this.SendFeedback(t,"tpu-")},t.prototype.ReportFalsePositive=function(t){return this.SendFeedback(t,"fp-")},t.prototype.ReportNAA=function(t){return this.SendFeedback(t,"naa-")},t.prototype.SendFeedback=function(t,e){var n=this;return new Promise(function(r,o){n.getUserKey().then(function(i){$.ajax({type:"POST",url:"https://metasmoke.erwaysoftware.com/api/w/post/"+t+"/feedback",data:{type:e,key:n.appKey,token:i}}).done(function(){return r()}).fail(function(){return o()})})})},t}();e.MetaSmokeyAPI=u}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t,e,n){var r,o;r=[n,e,n(0),n(25),n(14)],o=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="http://samserver.bhargavrao.com:8000/napi/api/feedback",s=function(){function t(){this.chat=new r.ChatApi}return t.prototype.Watch=function(t){var e=this;return this._subject=new o.Subject,n.GetAndCache("NattyApi.Feedback."+t,function(){return new Promise(function(e,n){GM_xmlhttpRequest({method:"GET",url:i+"/"+t,onload:function(t){var n=JSON.parse(t.responseText);e(!(!n.items||!n.items[0]))},onerror:function(t){n(t)}})})}).then(function(t){return e._subject.next(t)})["catch"](function(t){return e._subject.error(t)}),this._subject},t.prototype.Report=function(t){var e=this,r=this.chat.SendMessage(111347,"@Natty report http://stackoverflow.com/a/"+t);return r.then(function(){n.StoreInCache("NattyApi.Feedback."+t,!0),e._subject.next(!0)}),r},t.prototype.ReportTruePositive=function(t){return this.chat.SendMessage(111347,"@Natty feedback http://stackoverflow.com/a/"+t+" tp")},t.prototype.ReportNeedsEditing=function(t){return this.chat.SendMessage(111347,"@Natty feedback http://stackoverflow.com/a/"+t+" ne")},t.prototype.ReportFalsePositive=function(t){return this.chat.SendMessage(111347,"@Natty feedback http://stackoverflow.com/a/"+t+" fp")},t}();e.NattyAPI=s}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t,e,n){var r,o;r=[n,e],o=function(t,e){"use strict";function n(){return!!window.location.href.match(/\/new-answers-old-questions$/)}function r(){for(var t=$(".answer-hyperlink").parent().parent(),e=[],n=0;n<t.length;n++){var r=$(t[n]),o=parseInt(r.find(".answer-hyperlink").attr("href").split("#")[1],10),i=h(r.find(".user-action-time")),s=h(r.find("td .relativetime")),a=p(r.find(".reputation-score")),c=l(r.find(".user-details")),u=c.authorName,f=c.authorId;e.push({type:"Answer",element:r,postId:o,answerTime:i,questionTime:s,authorReputation:a,authorName:u,authorId:f})}return e}function o(){return!!window.location.href.match(/\/questions\/\d+\/.*/)}function i(){function t(t){var e=parseInt(t.find(".vote-count-post").text(),10),n=p(t.find(".post-signature .reputation-score").last()),r=l(t.find(".post-signature .user-details").last()),o=r.authorName,i=r.authorId,s=h(t.find(".post-signature .relativetime").last());return{score:e,authorReputation:n,authorName:o,authorId:i,postTime:s}}var e=$(".question"),n=parseInt(e.attr("data-questionid"),10),r=t(e),o=r.score,i=r.authorReputation,s=r.authorName,a=r.authorId,c=r.postTime,u=[],f={type:"Question",element:e,postId:n,postTime:c,score:o,authorReputation:i,authorName:s,authorId:a};u.push(f);for(var d=$(".answer"),b=0;b<d.length;b++){var m=$(d[b]),y=t(m),v=y.score,w=y.authorReputation,g=y.authorName,x=y.authorId,k=y.postTime;u.push({type:"Answer",element:e,postId:n,question:f,postTime:k,score:v,authorReputation:w,authorName:g,authorId:x})}return u}function s(){return!!window.location.href.match(/\/users\/flag-summary\//)}function a(){for(var t=$(".flagged-post"),e=[],n=0;n<t.length;n++){var r=$(t[n]),o=r.find(".answer-hyperlink").length?"Answer":"Question",i=parseInt("Answer"===o?r.find(".answer-hyperlink").attr("href").split("#")[1]:r.find(".question-hyperlink").attr("href").split("/")[2],10),s=parseInt(r.find(".answer-votes").text(),10),a=l(r.find(".post-user-info")),c=a.authorName,u=a.authorId,p=h(r.find(".post-user-info .relativetime")),f=h(r.find(".mod-flag .relativetime")),d=r.find(".flag-outcome").text().trim().split(" - "),b=d[0].trim(),m=d.slice(1).join(" - ").trim();e.push({type:o,postId:i,score:s,postTime:p,handledTime:f,handledResult:b,handledComment:m,authorName:c,authorId:u})}return e}function c(){for(var t=$(".question-hyperlink"),e=[],n=0;n<t.length;n++){var r=$(t[n]),o=r.attr("href").split("/")[2];o.indexOf("_")>=0&&(o=o.split("_")[1]);var i=parseInt(o,10);e.push({type:"Question",element:r,postId:i})}for(var s=$(".answer-hyperlink"),n=0;n<s.length;n++){var a=$(s[n]),o=a.attr("href").split("#")[1];o.indexOf("_")>=0&&(o=o.split("_")[1]);var i=parseInt(o,10);e.push({type:"Answer",element:a,postId:i})}return e}function u(){return n()?{Page:"NATO",Posts:r()}:o()?{Page:"Question",Posts:i()}:s()?{Page:"Flags",Posts:a()}:{Page:"Unknown",Posts:c()}}function p(t){var e=t.text();if(e.indexOf("k")!==-1&&(e=t.attr("title").substr("reputation score ".length)),e=e.replace(",",""),""!==e.trim())return parseInt(e,10)}function l(t){var e,n=t.find("a"),r=n.text(),o=n.attr("href");return o&&(e=parseInt(o.split("/")[2],10)),{authorName:r,authorId:e}}function h(t){t.hasClass("relativetime")||(t=t.find(".relativetime"));var e=new Date(t.attr("title"));return e}Object.defineProperty(e,"__esModule",{value:!0}),e.isNatoPage=n,e.parseNatoPage=r,e.isQuestionPage=o,e.parseQuestionPage=i,e.isFlagsPage=s,e.parseFlagsPage=a,e.parseGenericPage=c,e.parseCurrentPage=u}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var r=n(3),o=n(23),i=n(16),s=n(22),a=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=o.toSubscriber(t,e,n);if(r?r.call(i,this.source):i.add(this.source?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var o;o=n.subscribe(function(e){if(o)try{t(e)}catch(n){r(n),o.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();e.Observable=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(13),i=n(6),s=n(1),a=n(17),c=n(15),u=n(2),p=function(t){function e(e){t.call(this,e),this.destination=e}return r(e,t),e}(i.Subscriber);e.SubjectSubscriber=p;var l=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(e,t),e.prototype[u.rxSubscriber]=function(){return new p(this)},e.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},e.create=function(t,e){return new h(t,e)},e}(o.Observable);e.Subject=l;var h=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var e=this.source;return e?this.source.subscribe(t):s.Subscription.EMPTY},e}(l);e.AnonymousSubject=h},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(1),i=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);n!==-1&&e.splice(n,1)}}},e}(o.Subscription);e.SubjectSubscription=i},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var o=n(3);e.getSymbolObservable=r,e.observable=r(o.root),e.$$observable=e.observable},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);e.ObjectUnsubscribedError=r},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(e,t),e}(Error);e.UnsubscriptionError=r},function(t,e){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e){"use strict";function n(t){return null!=t&&"object"==typeof t}e.isObject=n},function(t,e){"use strict";function n(){}e.noop=n},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return o(t)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:i.noop}var i=n(21);e.pipe=r,e.pipeFromArray=o},function(t,e,n){"use strict";function r(t,e,n){if(t){if(t instanceof o.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||n?new o.Subscriber(t,e,n):new o.Subscriber(s.empty)}var o=n(6),i=n(2),s=n(5);e.toSubscriber=r},function(t,e,n){"use strict";function r(){try{return i.apply(this,arguments)}catch(t){return s.errorObject.e=t,s.errorObject}}function o(t){return i=t,r}var i,s=n(7);e.tryCatch=o},function(t,e,n){var r,o;r=[n,e,n(0)],o=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){void 0===t&&(t="http://chat.stackoverflow.com"),this.chatRoomUrl=""+t}return t.prototype.GetChannelFKey=function(t){var e=this,r="StackExchange.ChatApi.FKey_"+t,o=new Promise(function(n,r){GM_xmlhttpRequest({method:"GET",url:e.chatRoomUrl+"/rooms/"+t,onload:function(t){var e=t.responseText.match(/hidden" value="([\dabcdef]{32})/)[1];n(e)},onerror:function(t){return r(t)}})}),i=new Date;return i.setDate(i.getDate()+1),n.GetAndCache(r,function(){return o},i)},t.prototype.SendMessage=function(t,e,n){var r,o=this;return r=n?Promise.resolve(n):this.GetChannelFKey(t),r.then(function(n){return new Promise(function(r,i){GM_xmlhttpRequest({method:"POST",url:o.chatRoomUrl+"/chats/"+t+"/messages/new",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"text="+encodeURIComponent(e)+"&fkey="+n,onload:function(){return r()},onerror:function(t){i(t)}})})})},t}();e.ChatApi=r}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r,o,i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r["throw"](t))}catch(e){i(e)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){
function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(r){n=[6,r],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};r=[n,e,n(10),n(9),n(11),n(0),n(4),n(12)],o=function(t,e,n,r,o,a,c,u){"use strict";function p(){var t=document.createElement("style");t.type="text/css",t.textContent="\n#snackbar {\n    visibility: hidden;\n    min-width: 250px;\n    margin-left: -125px;\n    background-color: #00690c;\n    color: #fff;\n    text-align: center;\n    border-radius: 2px;\n    padding: 16px;\n    position: fixed;\n    z-index: 2000;\n    left: 50%;\n    top: 30px;\n    font-size: 17px;\n}\n\n#snackbar.show {\n    visibility: visible;\n    -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;\n    animation: fadein 0.5s, fadeout 0.5s 2.5s;\n}\n\n@-webkit-keyframes fadein {\n    from {top: 0; opacity: 0;}\n    to {top: 30px; opacity: 1;}\n}\n\n@keyframes fadein {\n    from {top: 0; opacity: 0;}\n    to {top: 30px; opacity: 1;}\n}\n\n@-webkit-keyframes fadeout {\n    from {top: 30px; opacity: 1;}\n    to {top: 0; opacity: 0;}\n}\n\n@keyframes fadeout {\n    from {top: 30px; opacity: 1;}\n    to {top: 0; opacity: 0;}\n}";var e=document.getElementsByTagName("head")[0]||document.body||document.documentElement;e.appendChild(t)}function l(t,e,n,r){var o={};if(n){var i=null;if(e.Comment)i=e.Comment;else if(e.Comments){var s=e.Comments;s.sort(function(t,e){return e.ReputationLimit-t.ReputationLimit});for(var a=0;a<s.length;a++)if(s[a].ReputationLimit<=r){i=s[a].Comment;break}}i&&(o.CommentPromise=new Promise(function(e,n){$.ajax({url:"//stackoverflow.com/posts/"+t+"/comments",type:"POST",data:{fkey:StackExchange.options.user.fkey,comment:i}}).done(function(t){e(t)}).fail(function(t,e,r){n({jqXHR:t,textStatus:e,errorThrown:r})})}))}return"NoFlag"!==e.ReportType&&(o.FlagPromise=new Promise(function(n,r){$.ajax({url:"//"+window.location.hostname+"/flags/posts/"+t+"/add/"+e.ReportType,type:"POST",data:{fkey:StackExchange.options.user.fkey,otherText:""}}).done(function(t){n(t)}).fail(function(t,e,n){r({jqXHR:t,textStatus:e,errorThrown:n})})})),o.PerformedActionPromise=Promise.resolve(),o}function h(t){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return _?[3,2]:(_=c.Delay(3500),k.text(t),k.addClass("show"),[4,c.Delay(3e3)]);case 1:return e.sent(),k.removeClass("show"),_=null,[3,4];case 2:return[4,_];case 3:e.sent(),h(t),e.label=4;case 4:return[2]}})})}function f(t,e){return Math.round((e-t)/864e5)}function d(){var t=$(".post-menu"),e=new Date($(".post-signature.owner .user-action-time .relativetime").attr("title"));t.each(function(t,n){var o=$(n),i=o.closest(".answercell").length>0?"Answer":"Question",s=parseInt(o.find(".flag-post-link").attr("data-postid"),10),c=o.closest("Answer"===i?".answercell":".postcell").find(".reputation-score"),u=c.text();u.indexOf("k")!==-1&&(u=c.attr("title").substr("reputation score ".length)),u=u.replace(",","");var p=parseInt(u,10),d=$("<a />").text("Advanced Flagging"),w=$("<dl />").css({margin:"0","z-index":"1",position:"absolute","white-space":"nowrap",background:"#FFF",padding:"5px",border:"1px solid #9fa6ad","box-shadow":"0 2px 4px rgba(36,39,41,0.3)",cursor:"default"}).hide(),g={display:"inline-block","margin-top":"5px",width:"auto"},x="comment_checkbox_"+s,k=$("<input />").attr("type","checkbox").attr("name",x),_=o.closest("Answer"===i?".answer":".question"),T=_.find(".comment-body");0===T.length&&k.prop("checked",!0);var A=S.GetFeedback(s,i),E=P.Watch(s),O=b(),R=m(),C=function(){return $("<hr />").css({"margin-bottom":"10px","margin-top":"10px"})},F=!1,j=!0;if(r.flagCategories.forEach(function(t){t.AppliesTo.indexOf(i)!==-1&&(j||w.append(C()),t.FlagTypes.forEach(function(n){(n.Comment||n.Comments&&n.Comments.length>0)&&(F=!0);var r=$("<dd />");t.BoxStyle&&r.css(t.BoxStyle);var c=$("<a />").css(g);c.click(function(){var t=l(s,n,k.is(":checked"),p);t.CommentPromise&&t.CommentPromise.then(function(t){var e=StackExchange.comments.uiForPost($("#comments-"+s));e.addShow(!0,!1),e.showComments(t,null,!1,!0),$(document).trigger("comment",s)}),t.FlagPromise&&t.FlagPromise.then(function(){a.StoreInCache("AdvancedFlagging.Flagged."+s,n),R.attr("title","Flagged as "+n.ReportType),R.show()});var r="NoFlag"===n.ReportType;r&&t.PerformedActionPromise&&t.PerformedActionPromise.then(function(){a.StoreInCache("AdvancedFlagging.PerformedAction."+s,n),O.attr("title","Performed action: "+n.DisplayName),O.show()});var c="PostSpam"===n.ReportType||"PostOffensive"===n.ReportType,u="AnswerNotAnAnswer"===n.ReportType,d="Needs Editing"===n.DisplayName;A.then(function(t){if(t.length>0){var e=t[0].id;c?S.ReportTruePositive(e).then(function(){return h("Feedback sent to MS")}):u?S.ReportNAA(e).then(function(){return h("Feedback sent to MS")}):r&&S.ReportFalsePositive(e).then(function(){return h("Feedback sent to MS")})}else c&&S.Report(s,i).then(function(){return h("Reported to MS")})}),E.toPromise().then(function(t){if(t)u||c?P.ReportTruePositive(s).then(function(){return h("Feedback sent to natty")}):r&&(d?P.ReportNeedsEditing(s).then(function(){return h("Feedback sent to natty")}):P.ReportFalsePositive(s).then(function(){return h("Feedback sent to natty")}));else if(u){var n=new Date(o.closest(".answercell").find('.post-signature .user-action-time:contains("answered") .relativetime').attr("title")),i=f(n,new Date),a=f(e,n);if(i>30||a<30)return void h("Won't report to Natty - doesn't meet time requirements");P.Report(s).then(function(){return h("Reported to natty")})}}),w.hide()}),c.text(n.DisplayName),r.append(c),w.append(r)}),j=!1)}),F){w.append(C());var N=$("<label />").text("Leave comment").attr("for",x).css({"margin-right":"5px","margin-left":"4px"});N.click(function(){return k.click()});var I=$("<dd />");I.append(N),I.append(k),w.append(I)}d.append(w),$(window).click(function(){w.hide()}),d.click(function(t){t.stopPropagation(),t.target===d.get(0)&&w.toggle()}),o.append(d),o.append(O),o.append(R);var q=y(),M=v();q.click(function(){window.open("https://sentinel.erwaysoftware.com/posts/aid/"+s,"_blank")}),A.then(function(t){if(t.length>0){var e=t[0].id;M.click(function(){window.open("https://metasmoke.erwaysoftware.com/post/"+e,"_blank")}),M.show()}}),E.subscribe(function(t){t?q.show():q.hide()});var D=a.GetFromCache("AdvancedFlagging.Flagged."+s);D.then(function(t){t&&(R.attr("title","Previously flagged as "+t.ReportType),R.show())});var G=a.GetFromCache("AdvancedFlagging.PerformedAction."+s);G.then(function(t){t&&"NoFlag"===t.ReportType&&(O.attr("title","Previously performed action: "+t.DisplayName),O.show())}),o.append(q),o.append(M)})}function b(){return $("<div>").addClass("comment-flag").css({"margin-left":"5px","background-position":"-61px -320px",visibility:"visible"}).css({width:"15px",height:"15px","background-position":"-20px -320px"}).css({cursor:"default"}).hide()}function m(){return $("<div>").addClass("comment-flag").css({"margin-left":"5px","background-position":"-61px -320px",visibility:"visible"}).css({cursor:"default"}).hide()}function y(){return $("<div>").css({width:"15px",height:"16px","margin-left":"5px","vertical-align":"text-bottom",cursor:"pointer",background:'url("https://i.stack.imgur.com/aMUMt.jpg?s=328&g=1"',"background-size":"100%"}).attr("title","Reported by Natty").hide()}function v(){return $("<div>").css({width:"15px",height:"16px","margin-left":"5px","vertical-align":"text-bottom",cursor:"pointer",background:'url("https://i.stack.imgur.com/WyV1l.png?s=128&g=1"',"background-size":"100%"}).attr("title","Reported by Smokey").hide()}function w(){$("a.answer-hyperlink").each(function(t,e){var r=$(e),i={display:"inline-block"},s=b(),c=m(),u=y(),p=v();r.after(p),r.after(u),r.after(c),r.after(s);var l=r.attr("href"),h=parseInt(l.split("#")[1],10),f=new n.MetaSmokeyAPI(x),d=f.GetFeedback(h,"Answer"),w=new o.NattyAPI,g=w.Watch(h);u.click(function(){window.open("https://sentinel.erwaysoftware.com/posts/aid/"+h,"_blank")});var k=a.GetFromCache("AdvancedFlagging.Flagged."+h);k.then(function(t){t&&(c.attr("title","Previously flagged as "+t.ReportType),c.show())});var _=a.GetFromCache("AdvancedFlagging.PerformedAction."+h);_.then(function(t){t&&"NoFlag"===t.ReportType&&(s.attr("title","Previously performed action: "+t.DisplayName),s.show())}),d.then(function(t){if(t.length>0){var e=t[0].id;p.click(function(){window.open("https://metasmoke.erwaysoftware.com/post/"+e,"_blank")}),p.css(i)}}),g.subscribe(function(t){t?u.css(i):u.hide()})})}function g(){var t=$(".-copyright, text-right").children(".g-column").children(".-list"),e=$("<div>").text("AdvancedFlagging Admin");t.after(e);var n=$("<ul>").css({"list-style":"none"}),r=$("<a />").text("Clear Metasmoke Configuration");r.click(function(){S.Reset()});var o=$("<a />").text("Clear all cached info");o.click(function(){a.ClearCache()}),e.append(n),n.append($("<li>").append(r)),n.append($("<li>").append(o))}Object.defineProperty(e,"__esModule",{value:!0});var x="0a946b9419b5842f99b052d19c956302aa6c6dd5a420b043b20072ad2efc29e0",k=$("<div>").attr("id","snackbar"),_=null,S=new n.MetaSmokeyAPI(x),P=new o.NattyAPI;$(function(){a.InitializeCache("https://metasmoke.erwaysoftware.com/xdom_storage.html");var t=u.parseCurrentPage();t&&console.log(t.Posts),d(),w(),g(),p(),document.body.appendChild(k.get(0))})}.apply(e,r),!(void 0!==o&&(t.exports=o))}]);